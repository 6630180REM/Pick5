<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Joe's Pick 5">
    <meta name="theme-color" content="#333">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Dynamic icons -->
    <link rel="icon" id="favicon" type="image/png">
    <link rel="apple-touch-icon" id="apple-touch-icon">

    <title>Joe's Pick 5</title>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #333;
        }
        iframe {
            width: 100%;
            height: 100vh;
            border: none;
            display: block;
            overflow: auto;
        }
    </style>
</head>
<body>
    <iframe frameborder="0" scrolling="yes" allowfullscreen="yes" 
        src="https://script.google.com/macros/s/AKfycbwuZM7KGKnS7jnpM2YN9W_AgTMqA0qJGw99K3MIUNxzI1tnh3YK76AhgeCfh2Wc7pTd/exec">
    </iframe>

    <script>
        function resizeIframe() {
            var iframe = document.querySelector("iframe");
            iframe.style.height = window.innerHeight + "px";
        }

        window.addEventListener("resize", resizeIframe);
        window.addEventListener("load", resizeIframe);

        // Register service worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
                .then((reg) => {
                    console.log('Service Worker Registered!', reg);
                    reg.update(); // Force update
                })
                .catch((error) => console.error('Service Worker Registration Failed:', error));
        }

        // Force update icons dynamically
        document.addEventListener("DOMContentLoaded", function() {
            const iconUrl = "https://forum.thefanpub.com/uploads/db6257/original/2X/0/0f40017efb8e6f7fdaf666fbce8469e7a2bde2bd.png?v=" + new Date().getTime();
            
            document.getElementById("favicon").href = iconUrl;
            document.getElementById("apple-touch-icon").href = iconUrl;
        });

        // Scroll manipulation to collapse mobile browser toolbar
        let lastScrollY = 0;
        const iframe = document.querySelector("iframe");

        iframe.addEventListener("load", () => {
            iframe.contentWindow.addEventListener("scroll", () => {
                const currentScrollY = iframe.contentWindow.scrollY;

                if (Math.abs(currentScrollY - lastScrollY) > 10) { 
                    window.scrollTo(0, window.scrollY + (currentScrollY - lastScrollY));
                }

                lastScrollY = currentScrollY;
            });
        });
    </script>
</body>
</html>
