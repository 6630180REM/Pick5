<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Joe's Pick 5">
    <meta name="theme-color" content="#333">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Force update by appending a version query -->
    <link rel="icon" id="favicon" type="image/png">
    <link rel="apple-touch-icon" id="apple-touch-icon">

    <!-- Web App Manifest -->
    <link rel="manifest" href="/manifest.json?v=2">

    <title>Joe's Pick 5</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #333;
        }
        iframe {
            width: 100%;
            height: 100vh;
            border: none;
            display: block;
            overflow: auto;
        }
    </style>
</head>
<body>
    <iframe frameborder="0" scrolling="yes" allowfullscreen="yes" 
        src="https://script.google.com/macros/s/AKfycbwuZM7KGKnS7jnpM2YN9W_AgTMqA0qJGw99K3MIUNxzI1tnh3YK76AhgeCfh2Wc7pTd/exec">
    </iframe>

    <script>
        function resizeIframe() {
            var iframe = document.querySelector("iframe");
            iframe.style.height = window.innerHeight + "px";
        }

        window.addEventListener("resize", resizeIframe);
        window.addEventListener("load", resizeIframe);

        // Register service worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
                .then((reg) => {
                    console.log('Service Worker Registered!', reg);
                    reg.update(); // Force update
                })
                .catch((error) => console.error('Service Worker Registration Failed:', error));
        }

        // Dynamically set the icon with a version query to force update
        document.addEventListener("DOMContentLoaded", function() {
            const version = new Date().getTime(); // Change on every reload
            const newIconUrl = `/HomeScreen.png?v=${version}`;

            document.getElementById("favicon").href = newIconUrl;
            document.getElementById("apple-touch-icon").href = newIconUrl;
        });
    </script>
</body>
</html>
